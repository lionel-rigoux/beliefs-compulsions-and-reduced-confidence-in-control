# Beliefs, compulsive behavior and reduced confidence in control

This repository contains all the code necessary to reproduce the simulations and analysis of the paper 'Beliefs, compulsive behavior and reduced confidence in control'.

## Requirements

First make sure you cloned this repository including the submodules which are necessary to run the code, all located in `code/third-party`.

All the scripts are to be run in Matlab, but depend on a binary executable which can be found in `code/lib/@agent/private/pomdp-solve-*`. Precompiled binaries are provided for MacOS and Unix. If you need to run this code on another machine, you will need to compile the code in `code/third-party/pompdp-solve-5.4` and replace the executable in the `@agent/private` folder. 

## Use

The main building block of this code is the `agent` object. Look at the dedicated [README](code/lib/) to check how to create, simulate, and diagnose agents.

The set of simulations reported in the paper can be regenerated by running `code/simulations/main.m`. Beware that depite the fact that the code is parallelized (if you have the Parallel Toolbox for Matlab), *the complete simulation can take up to two weeks on a high performance cluster*. You can however edit the configuration file `code/simulations/config.yaml` beforehand to scale it down.

The analysis of the simulations can be performed in one go by running `code/analyses/main.m`. The first step of this routine is to cleanup the simulations into simpler summary files in `code/analyses/scratch`. If you do not want to run the simulations yourself, you can download pre-made summary files from the [release page](https://github.com/lionel-rigoux/beliefs-compulsions-and-reduced-confidence-in-control/releases) in the `scratch` folder before running the `main.m` script.
Note that this procedure will generate plots, tables, and markdown files which will be saved (overriding existing files) in the `/figures`, `/tables`, and `/texts` folder respectively.

An exaustive overview of all the generated results can be exported to pdf using [pandemics](https://pandemics.gitlab.io/) by running `pandemics publish report.md` in this directory.
