# Agent

## Properties

- `params.world`: parameters determining actual world contingencies
- `params.subjective`: agent parameters used for policy optimization
- `pomdp`: full definition of the full pomdp problem
- `policy`: alpha-lines defining the value of each action on the belief space
- `simulation`: sequences of actions, states, etc. generated by a call to `simulate ()`
- `diagnostic`: summary statistics of the simulations obtained by calling `diagnose ()`
- `log`: output of the call to `pomdp-solve`
- `allow_no_check`: flag specifying if, when creating a new random agant, we can accept the optimal policy even if it doesn't include the "check" action (default = false) 

## Methods

### Constructor

- `a = agent()`: create a new agent with a random set of parameters (without any belief distortion) and compute the corresponding optimal policy, effectively creating a new "world". As purely random parameters often yield invalid policies (e.g. not all actions, actions repetition), this agent creation process iterates new parameter sets untill a valid policy is found. 


  `a = agent(true)`: will generate a new agent while accepting policies which do not include any "check" action.

  `a = agent(params)`: create an agent with the parameters exactly as defined in the `params` structure (must have the same fields as the agent property).

### Public

- `a.isFullPolicy ()` return if the optimal policy contains all actions

- `a.changeSubjective ()`: randomly changes all the parameters of the agent (subjective parameters) and reoptimize the policy accordingly.

  `a.changeSubjective (paramName)`: same, but with only the parameter `paramName` being regenerated, others staying equal to the world.

  `a.changeSubjective (paramName, paramValue)`: set the parameter `paramName` to `paramValue` and reoptimize the policy. 

- `a.getDelta ()`: return the difference between the world parameter and the subjective parameters.

- `a.simulate (N, T)`: simulate N sequences of T actions using the subjective policy and the world's transition definitions. This sets the `simulation` field of the agent.

- `a.diagnose ()`: compute summary statistics of the simulation stored in the agent. This sets the `diagnostic` field of the agent.

### Private

- `randParams ()`: generate and return a random set of parameters

- `a.optimizePolicy ()`: compute the optimal policy given the subjective parameters using the `pomdp-solve` routine, and store the resulting action-value mapping (alpha lines) in `policy`.

- `writePOMDP (params, format, filename)`: given a set of parameters, provide the full POMDP matrices (transitions, observations, etc) and either write it in a file (to be used by `pomdp-solve`) or as return it as a structure.

- `readPOMDP (filename)`: read POMDP description from a file as used by `pomdp-solve`.